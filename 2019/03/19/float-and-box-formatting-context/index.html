<!DOCTYPE html><html lang="zh"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta name="description" content="Aaron&#39;s blog"><meta name="keyword" content="blog,front end,css,html,javascript"><link rel="shortcut icon" href="/css/images/logo.png"><title>float与BFC | Aaron&#39;s Blog</title><link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet"><style>a{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif}</style><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/tomorrow.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });</script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><div class="wechat-share"><img src="/css/images/logo.png" alt="logo"></div><body><div id="container"><header class="header fixed-header"><div class="header-container"><a class="home-link" href="/"><div class="logo"></div><span><svg height="60" width="250" id="header-svg"><symbol id="s-text"><text text-anchor="left" x="0%" y="50%" dy=".35em">Aaron's Blog</text></symbol><use class="text" xlink:href="#s-text"></use><use class="text" xlink:href="#s-text"></use><use class="text" xlink:href="#s-text"></use><use class="text" xlink:href="#s-text"></use><use class="text" xlink:href="#s-text"></use></svg><style>#header-svg{position:absolute;top:0}@media screen and (max-width:768px){#header-svg{top:-7px}}.text{fill:none;stroke-width:2;stroke-linejoin:round;stroke-dasharray:40 185;stroke-dashoffset:0;-webkit-animation:stroke 8s infinite linear;animation:stroke 8s infinite linear;font-size:40px;line-height:1;height:40px}.text:nth-child(5n+1){stroke:#f2385a;-webkit-animation-delay:-1.6s;animation-delay:-1.6s}.text:nth-child(5n+2){stroke:#f5a503;-webkit-animation-delay:-3.2s;animation-delay:-3.2s}.text:nth-child(5n+3){stroke:#42b983;-webkit-animation-delay:-4.8s;animation-delay:-4.8s}.text:nth-child(5n+4){stroke:#56d9cd;-webkit-animation-delay:-6.4s;animation-delay:-6.4s}.text:nth-child(5n+5){stroke:#3aa1bf;-webkit-animation-delay:-8s;animation-delay:-8s}@-webkit-keyframes stroke{100%{stroke-dashoffset:-225}}@keyframes stroke{100%{stroke-dashoffset:-225}}</style></span></a><ul class="right-list"><li class="list-item"><a href="/" class="item-link">Home</a></li><li class="list-item"><a href="/tags/" class="item-link">Tags</a></li><li class="list-item"><a href="/archives/" class="item-link">Archives</a></li><li class="list-item"><a href="/project/" class="item-link">Project</a></li><li class="list-item"><a href="/about/" class="item-link">About</a></li></ul><div class="menu"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></div><div class="menu-mask"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">Home</a></li><li class="menu-item"><a href="/tags/" class="menu-link">Tags</a></li><li class="menu-item"><a href="/archives/" class="menu-link">Archives</a></li><li class="menu-item"><a href="/project/" class="menu-link">Project</a></li><li class="menu-item"><a href="/about/" class="menu-link">About</a></li></ul></div></div></header><div id="article-banner"><h2>float与BFC</h2><p class="post-date">2019-03-19</p></div><main class="app-body flex-box"><article class="post-article"><section class="markdown-content"><h3 id="关于-float"><a href="#关于-float" class="headerlink" title="关于 float"></a>关于 <strong>float</strong></h3><p>CSS 中 float 属性对可以方便的进行页面布局，将元素脱离文档流，类似于沉入河底的石头变成木头浮了起来，但是需要注意的是如果有文字等 inline,inline-block 元素会环绕 float 元素。</p><iframe height="265" scrolling="no" title="float-css" src="//codepen.io/noobcoderclub/embed/pLaNQy/?height=265&theme-id=light&default-tab=result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><p>还有就是 float 属性绝对定位元素（absolute,fixed）无效。<br>使用 float 属性意味着块布局，将隐性的将大多其他元素类型隐性转换为<code>block</code>(除了对<code>flex</code>元素内的元素的不生效)。因此如果是 float 生效的 inline 元素就可设置宽高大小。</p><iframe height="265" scrolling="no" title="float-position" src="//codepen.io/noobcoderclub/embed/WzMRer/?height=265&theme-id=light&default-tab=result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><blockquote><p>如果要在 JavaScript 中把 float 属性当作 element.style 对象的一个成员来操作，那么在 Firefox 34 和更老的版本中，你必须拼写成 cssFloat。另外还要注意到在 Internet Explorer 8 和更老的 IE 当中，要使用 styleFloat 属性。这是 DOM 驼峰命名和 CSS 所用的连字符分隔命名法对应关系中的一个特例（这是因为在 JavaScript 中”float”是一个保留字，因为同样的原因，”class”被改成了”className” 、”for”被改成了”htmlFor”）。</p></blockquote><h3 id="关于-clear"><a href="#关于-clear" class="headerlink" title="关于 clear"></a>关于 <strong>clear</strong></h3><p>当我们使用 float 进行布局时，时常会出现父容器高度没被撑起来的现象（高度塌陷）。在 float 属性设计之初并不是用于布局所以才会出现这种现象 orz&lt;3。这时候就需要 clear 属性来消除这种现象。</p><iframe height="265" scrolling="no" title="LdQxrv" src="//codepen.io/noobcoderclub/embed/LdQxrv/?height=265&theme-id=light&default-tab=result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><p>clear 属性实际上是设置是否允许一个浮动元素 A 在当前元素 B 之前，如果允许，那么 B 就会排列在 A 之后,随之而来的就是父元素会将 B 元素包裹，整个高度也就支撑起来了。这也就是为什么通常清除浮动都是将一个隐形的带有 clear 属性的<code>block</code>元素放置在父容器的最后。</p><iframe height="265" scrolling="no" title="EEQZqM" src="//codepen.io/noobcoderclub/embed/EEQZqM/?height=265&theme-id=light&default-tab=result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><h3 id="清除浮动的方法"><a href="#清除浮动的方法" class="headerlink" title="清除浮动的方法"></a>清除浮动的方法</h3><ul><li>放置带有 clear 属性的块级元素在父容器最后。</li><li>父容器添加 overflow:hidden 方法，超出父容器部分将会被隐藏，有一定局限性，因为超出父元素的情况很常见，绝对定位，margin 为负值。</li><li>伪元素清除浮动，可以认为这是最佳的解决方案，兼容 IE8+，只需为需要清除浮动的元素添加 class 即可。</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear-fix</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> clearfix() &#123;</span><br><span class="line">  &amp;::after &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="关于-BFC"><a href="#关于-BFC" class="headerlink" title="关于 BFC"></a>关于 <strong>BFC</strong></h3><blockquote><p>A block formatting context is a part of a visual CSS rendering of a Web page. It is the region in which the layout of block boxes occurs and in which floats interact with other elements.</p></blockquote><p>简单来说就是当根据 CSS 渲染元素时，在一些情况下会在局部生成一个块级区域与外界元素隔离，<strong>用于消除元素之间相互布局的影响</strong>。</p><p>这样我们就能理解为什么 overflow:hidden 能够清除浮动,因为其能够触发建立 BFC,与外层元素隔离消除相互影响。</p><p>下面有这样一个例子。</p><iframe height="265" scrolling="no" title="BFC-example" src="//codepen.io/noobcoderclub/embed/mxXxxd/?height=265&theme-id=light&default-tab=css,result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><p>上面这个例子中 text 区域就建立了 BFC 区域，不受外部的影响。</p><h3 id="建立-BFC-的情况"><a href="#建立-BFC-的情况" class="headerlink" title="建立 BFC 的情况"></a>建立 <strong>BFC</strong> 的情况</h3><ul><li>浮动元素（元素的 float 不是 none）</li><li>绝对定位元素（元素的 position 为 absolute 或 fixed）</li><li>行内块元素（元素的 display 为 inline-block）</li><li>overflow 值不为 visible 的块元素</li><li>弹性元素（display 为 flex 或 inline-flex 元素的直接子元素）</li><li>网格元素（display 为 grid 或 inline-grid 元素的直接子元素）</li><li>根元素或包含根元素的元素</li><li>表格单元格（元素的 display 为 table-cell，HTML 表格单元格默认为该值）</li><li>表格标题（元素的 display 为 table-caption，HTML 表格标题默认为该值）</li><li>匿名表格单元格元素（元素的 display 为 table、table-row、 table-row-group、table-header-group、table-footer-group（分别是 HTML table、row、tbody、thead、tfoot 的默认属性）或 inline-table）</li><li>display 值为 flow-root 的元素</li><li>contain 值为 layout、content 或 strict 的元素</li><li>多列容器（元素的 column-count 或 column-width 不为 auto，包括 column-count 为 1）</li><li>column-span 为 all 的元素始终会创建一个新的 BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）。</li></ul><h3 id="BFC-的特性"><a href="#BFC-的特性" class="headerlink" title="BFC 的特性"></a>BFC 的特性</h3><h4 id="阻止-margin-collaspe"><a href="#阻止-margin-collaspe" class="headerlink" title="阻止 margin collaspe"></a>阻止 margin collaspe</h4><p>还有一点在同一个在 BFC 区域中,文档流内两个<code>垂直相邻</code>的块级盒子（block,table,list-item）的 margin 会发生折叠（margin collaspe），最终计算值为最大值。<br>浮动，绝对定位元素,inline-block 等会产生 BFC。因此，也可利用这些条件来去除 margin collaspe。<br>下面是一个利用<code>display:inline-block</code>去除外边距层叠的例子。</p><iframe height="299" scrolling="no" title="BFC" src="//codepen.io/noobcoderclub/embed/QmQvoj/?height=299&theme-id=light&default-tab=css,result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><h4 id="包含浮动元素"><a href="#包含浮动元素" class="headerlink" title="包含浮动元素"></a>包含浮动元素</h4><p>包含浮动元素其实就是清除浮动。</p><iframe height="265" scrolling="no" title="demo" src="//codepen.io/noobcoderclub/embed/ZxrVPd/?height=265&theme-id=light&default-tab=html,result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><h4 id="阻止被浮动兄弟元素遮挡"><a href="#阻止被浮动兄弟元素遮挡" class="headerlink" title="阻止被浮动兄弟元素遮挡"></a>阻止被浮动兄弟元素遮挡</h4><iframe height="265" scrolling="no" title="demo2" src="//codepen.io/noobcoderclub/embed/OvQdEd/?height=265&theme-id=light&default-tab=css,result&embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen style="width:100%"></iframe><p>参考链接：</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/CSS/float" target="_blank" rel="noopener">float(MDN)</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/clear" target="_blank" rel="noopener">clear(MDN)</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">BFC(MDN)</a></li><li><a href="http://www.zhangxinxu.com/wordpress/2010/01/css-float%E6%B5%AE%E5%8A%A8%E7%9A%84%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%E3%80%81%E8%AF%A6%E8%A7%A3%E5%8F%8A%E6%8B%93%E5%B1%95%E4%BA%8C/" target="_blank" rel="noopener">CSS float 浮动的深入研究、详解及拓展(二)</a></li></ul></section><div class="tags"><span>Tags:</span> <a href="/tags#BFC"><span class="tag-code">BFC</span></a></div><div class="nav-container"><a class="nav-left" href="/2019/03/10/sort-algorithm-4/"><span class="nav-arrow">← </span>排序算法之计数排序，桶排序，基数排序</a></div><div id="disqus_thread"></div></article><aside class="catalog-container"><div class="toc-main"><strong class="toc-title">Catalog</strong><ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#关于-float"><span class="toc-nav-text">关于 float</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#关于-clear"><span class="toc-nav-text">关于 clear</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#清除浮动的方法"><span class="toc-nav-text">清除浮动的方法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#关于-BFC"><span class="toc-nav-text">关于 BFC</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#建立-BFC-的情况"><span class="toc-nav-text">建立 BFC 的情况</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#BFC-的特性"><span class="toc-nav-text">BFC 的特性</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#阻止-margin-collaspe"><span class="toc-nav-text">阻止 margin collaspe</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#包含浮动元素"><span class="toc-nav-text">包含浮动元素</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#阻止被浮动兄弟元素遮挡"><span class="toc-nav-text">阻止被浮动兄弟元素遮挡</span></a></li></ol></li></ol></div></aside></main><script>(function () {
    var url = 'https://blog.noobcoder.club/2019/03/19/float-and-box-formatting-context/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url + Math.random())
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function () {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function () {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="' + src + '" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function () {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();</script><script>var disqus_shortname="aaron00101010",disqus_url="https://blog.noobcoder.club/2019/03/19/float-and-box-formatting-context/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//go.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><div class="scroll-top"><span class="arrow-icon"></span></div></div><footer class="app-footer"><p class="copyright">&copy; 2019 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a><br>Theme by <a href="https://github.com/yanm1ng">yanm1ng</a></p></footer><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js",function(){FastClick.attach(document.body)})</script><script>var hasLine="true";async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js",function(){$("figure pre").each(function(t,a){var e=$(this).parents("figure");"false"===hasLine&&e.find(".gutter").hide();var i=e.attr("class").split(" ")[1]||"code",s=$(this).html(),h=document.createElement("code");h.className=i,h.innerHTML=s,$(this).attr("class","").empty().html(h),e.attr("data-lang",i.toUpperCase()),hljs.highlightBlock(a)})})</script><script src="/js/script.js"></script></body></html>